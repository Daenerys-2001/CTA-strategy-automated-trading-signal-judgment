# CTA-strategy-automated-trading-signal-judgment

本项目基于CTA策略思想，构建了一个**用于捕捉中期极值进行回归交易的自动化因子模型系统**。该系统融合了EMA多周期趋势判断、XGBoost机器学习预测和极值检测机制，实现了模型自适应更新与预测信号输出。

---

## 🌐 项目简介

- **策略核心**：捕捉中期趋势极值后，利用机器学习预测后续走势，结合波动率与总持仓变化生成买卖信号。
- **适用场景**：商品期货、中期CTA策略、对冲交易、趋势回归策略。
- **模型结构**：
  - 多周期EMA组合判断趋势结构（短、中、长）
  - XGBoost模型输入特征：价格/持仓/波动等因子
  - 极值点检测触发学习与预测
  - 最终输出信号：用于实盘交易或策略回测

---

## 🧠 模型架构

1. **数据初始化**
   - 15 分钟间隔数据
   - 历史 EMA、成交量、未平仓合约

2. **间隔更新循环***
   - 更新价格、收益和 EMA 结构
   - 检测新的极值 → 标签 + 模型更新
   - 使用 XGBoost 预测新的回报率

3. **信号生成**
   - 预测与预测偏差
   - 使用波动率进行归一化

4. **输出交易信号**
   - 每个工具一个信号
   - 专为投资组合对冲或头寸调整而设计
  
## 🧪 测试用例说明

1. **模型参数加载**  
   - 训练完成后的模型参数保存在文件：bst_20240701.json
   - 模拟三种不同类型的市场：save_mss_mock.py，save_mss2_mock.py，save_mss3_mock.py
   - 市场状态数据保存在文件：mss_mock_for_test.bin
2. **运行测试文件**
   - 修改路径，传入实际路径，运行文件：test.py

## 🚀 实际部署

传入最新的 json_path 和 mss_path 参数，系统会自动加载模型并输出交易信号，直接运行 factor_function.py 中的因子函数 factor_function 来进行预测。


